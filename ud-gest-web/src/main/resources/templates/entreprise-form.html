<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:include="fragments/header :: header"></head>
<body>
	<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation"
		th:include="fragments/menu :: menu"></nav>
	<div class="container">
		<div class="row">
			<div class="col-lg-12">
				<h1 class="page-header">Ajouter entreprise</h1>
				<ol class="breadcrumb">
					<li><a th:href="@{/show-entreprise-search}">Rechercher entreprise</a></li>
					<li class="active">Ajouter entreprise</li>
				</ol>
			</div>
		</div>
		<div class='row'>
			<form class="form-horizontal" method="post" th:object="${entreprise}" th:action="@{/save-entreprise}">
				<div class='row'>
					<div class="col-lg-12 form-group-adherent">
						<p class="fa fa-inverse">Informations générales</p>
						<span id="test_ajout" class="fa fa-inverse" style="margien-left:10px;">test-ajout</span>
					</div>
				</div>
				<div class='row'>
					<div class="col-lg-6">
						<div class="form-group">
							<label for="libelle" class="col-sm-2 control-label">Libellé :</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" th:field="*{libelle}" id="libelle_entreprise"></input>
							</div>
						</div>
						<div class="form-group">
							<label for="tel" class="col-sm-2 control-label">Téléphone :</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" th:field="*{tel}" id="tel_entreprise"></input>
							</div>
						</div>
						<div class="form-group">
							<label for="fax" class="col-sm-2 control-label">Fax :</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" th:field="*{fax}" id="fax_entreprise"></input>
							</div>
						</div>
						<div class="form-group">
							<label for="mail" class="col-sm-2 control-label">Mail :</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" th:field="*{mail}" id="mail_entreprise"></input>
							</div>
						</div>
						<div class="form-group">
							<label for="mail" class="col-sm-2 control-label">Web :</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" th:field="*{siteWeb}" id="web_entreprise"></input>
							</div>
						</div>
						<div class="form-group">
							<label for="date_election" class="col-sm-2 control-label">Elections :</label>
							<div class="col-sm-8">
								<input type="date" class="form-control" th:field="*{dateElection}" id="date_election"></input>
							</div>
						</div>
					</div>
					<div class="col-lg-6">
						<div class="form-group">
							<label for="num_rue" class="col-sm-2 control-label">N° :</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" th:field="*{numeroRue}" id="num_rue_entreprise"></input>
							</div>
						</div>
						<div class="form-group">
							<label for="rue" class="col-sm-2 control-label">Rue :</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" th:field="*{libelleRue}" id="rue_entreprise"></input>
							</div>
						</div>
						<div class="form-group">
							<label for="cp" class="col-sm-2 control-label">Cp :</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" th:field="*{cp}" id="cp_entreprise"></input>
							</div>
						</div>
						<div class="form-group">
							<label for="ville" class="col-sm-2 control-label">Ville :</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" th:field="*{ville}" id="ville_entreprise"></input>
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-xs-12">
						<button type="submit" class="btn btn-secondary">Ajouter</button>
					</div>
				</div>
			</form>
		</div>
	</div>
</body>
<div th:include="fragments/footer :: footer"></div>
	<!-- jquery autocomplete pluggin -->
	<script src="js/jquery.easy-autocomplete.min.js" th:src="@{/js/jquery.easy-autocomplete.min.js}"></script>
		
	<script type="text/javascript">

	$(function() {
		
		$("#test_ajout").on("click", function() {
			$("#libelle_entreprise").val("AUSY");
			$("#date_election").text("23/06/2018");
			$("#tel_entreprise").val("0146309100");
			$("#fax_entreprise").val("0146309100");
			$("#mail_entreprise").val("john@attend.com");
			$("#web_entreprise").val("Ausy@ausy.fr");
			$("#num_rue_entreprise").val("666");
			$("#rue_entreprise").val("nowhere");
			$("#cp_entreprise").val("66666");
			$("#ville_entreprise").val("Springfield");
		})
		
 		/**
 		autocompletion pour l'entreprise
 		**/
		var optionsEntreprise = {
			  url: function(motCle) {
			    return "search-entreprise-ajax";
			  },
			  getValue: function(element) {
			    return element.libelle;
			  },
			  ajaxSettings: {
			    dataType: "json",
			    method: "POST",
			    data: {
			      dataType: "json"
			    }
			  },
			  preparePostData: function(data) {
			    data.motCle = $("#libelle_entreprise").val();
			    return data;
			  },
			  list: {
				  onChooseEvent: function() {
					var entreprise = $("#libelle_entreprise").getSelectedItemData();
					$("#id_entreprise").val(entreprise.id);
					$("#num_rue_entreprise").val(entreprise.numeroRue);
					$("#libelle_rue_entreprise").val(entreprise.libelleRue);
					$("#cp_entreprise").val(entreprise.cp);
					$("#ville_entreprise").val(entreprise.ville);
					$("#tel_entreprise").val(entreprise.tel);
					$("#fax_entreprise").val(entreprise.fax);
					$("#web_entreprise").val(entreprise.siteWeb);
				}  
			  },
			  requestDelay: 400
			};
		$("#libelle_entreprise").easyAutocomplete(optionsEntreprise);
		
		/**
		autocompletion pour le syndicat
		**/
	var optionsSyndicat = {
		  url: function(motCle) {
		    return "search-syndicat-ajax";
		  },
		  getValue: function(element) {
		    return element.libelle;
		  },
		  ajaxSettings: {
		    dataType: "json",
		    method: "POST",
		    data: {
		      dataType: "json"
		    }
		  },
		  preparePostData: function(data) {
		    data.motCle = $("#libelle_syndicat").val();
		    return data;
		  },
		  list: {
			  onChooseEvent: function() {
				var syndicat = $("#libelle_syndicat").getSelectedItemData();
				$("#id_syndicat").val(syndicat.id);
				$("#dernier_ag_syndicat").val(syndicat.dernierAg);
				$("#prochain_ag_syndicat").val(syndicat.prochainAg);
				$("#num_rue_syndicat").val(syndicat.numeroRue);
				$("#libelle_rue_syndicat").val(syndicat.libelleRue);
				$("#cp_syndicat").val(syndicat.cp);
				$("#ville_syndicat").val(syndicat.ville);
				$("#tel_syndicat").val(syndicat.tel);
				$("#fax_syndicat").val(syndicat.fax);
				$("#mail_syndicat").val(syndicat.mail);
				$("#web_syndicat").val(syndicat.siteWeb);
			}  
		  },
		  requestDelay: 400
		};
		$("#libelle_syndicat").easyAutocomplete(optionsSyndicat);
	});
	


	
	
	</script>
</html>
